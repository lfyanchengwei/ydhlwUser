import{C as t,r as a,b as e,n as s,D as l,E as i,c,w as o,i as n,o as f,d as u,e as d,t as r,u as _,v,F as m,f as g,g as p,A as y}from"./index-Cr98tpWe.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=h({data:()=>({userInfo:t("userInfo")||{},activities:[]}),onShow(){this.fetchActivities()},methods:{formatDate(t){const a=new Date(t);return`${a.getFullYear()}年${a.getMonth()+1}月${a.getDate()}日 ${a.getHours()}:${a.getMinutes()}`},fetchUserActivities(){const s=t("userId");a({url:`http://154.8.140.108:8883/api/registration/listUsersParticipation?userId=${s}`,method:"GET",success:t=>{1===t.data.code?this.activities=t.data.data:e({title:"获取活动列表失败",icon:"none"})},fail:()=>{e({title:"请求失败，请检查网络连接",icon:"none"})}})},navigateToFeedback(){s({url:"/pages/feedback/feedback"})},logout(){l("userInfo"),l("token"),i({url:"/pages/login/login"})}},mounted(){this.fetchUserActivities()}},[["render",function(t,a,e,s,l,i){const h=g,b=n,k=y,I=p;return f(),c(b,{class:"personal-center"},{default:o((()=>[u(b,{class:"card user-info"},{default:o((()=>[u(b,{style:{"margin-bottom":"30px"}},{default:o((()=>[u(h,{class:"section-title"},{default:o((()=>[d("个人信息")])),_:1})])),_:1}),u(b,{class:"info-item"},{default:o((()=>[u(h,{class:"info-label"},{default:o((()=>[d("用户名：")])),_:1}),u(h,{class:"info-value"},{default:o((()=>[d(r(l.userInfo.username),1)])),_:1})])),_:1}),u(b,{class:"info-item"},{default:o((()=>[u(h,{class:"info-label"},{default:o((()=>[d("邮箱：")])),_:1}),u(h,{class:"info-value"},{default:o((()=>[d(r(l.userInfo.email),1)])),_:1})])),_:1}),u(b,{class:"info-item"},{default:o((()=>[u(h,{class:"info-label"},{default:o((()=>[d("角色：")])),_:1}),u(h,{class:"info-value"},{default:o((()=>[d(r(l.userInfo.role),1)])),_:1})])),_:1}),u(b,{class:"info-item"},{default:o((()=>[u(h,{class:"info-label"},{default:o((()=>[d("注册时间：")])),_:1}),u(h,{class:"info-value"},{default:o((()=>[d(r(l.userInfo.createdAt),1)])),_:1})])),_:1})])),_:1}),u(b,{class:"card activity-history"},{default:o((()=>[u(b,{style:{"margin-bottom":"30px"}},{default:o((()=>[u(h,{class:"section-title"},{default:o((()=>[d("活动履历")])),_:1})])),_:1}),l.activities.length?(f(),c(b,{key:0},{default:o((()=>[(f(!0),_(m,null,v(l.activities,(t=>(f(),c(b,{class:"activity-item",key:t.eventId},{default:o((()=>[u(b,{class:"activity-info"},{default:o((()=>[u(k,{src:t.picUrl,class:"activity-image",mode:"aspectFill"},null,8,["src"]),u(b,{class:"activity-details"},{default:o((()=>[u(h,{class:"activity-title"},{default:o((()=>[d(r(t.title),1)])),_:2},1024),u(h,{class:"activity-location"},{default:o((()=>[d("📍 "+r(t.location),1)])),_:2},1024),u(h,{class:"activity-date"},{default:o((()=>[d("🗓 "+r(i.formatDate(t.eventTime)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(f(),c(b,{key:1},{default:o((()=>[u(h,{class:"empty-text"},{default:o((()=>[d("暂无已报名的活动")])),_:1})])),_:1}))])),_:1}),u(b,{class:"functional-section"},{default:o((()=>[u(I,{class:"btn-primary",onClick:i.navigateToFeedback},{default:o((()=>[d("反馈与帮助")])),_:1},8,["onClick"]),u(I,{class:"btn-danger",onClick:i.logout},{default:o((()=>[d("退出登录")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-4492cd33"]]);export{b as default};
